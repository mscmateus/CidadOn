<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<style type="text/css">
html {
	height: 100%
}

body {
	height: 100%;
	margin: 0;
	padding: 0
}

#map_canvas {
	height: 100%
}
</style>
<link rel="stylesheet" href="../css/estilo.css">
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA6hGq5B1bTduHlMSce0J16l0XPNtqEySo"></script>
<script type="text/javascript">
	var map, infoWindow, ufac = { lat : -9.954090, lng : -67.863422 }, cordenadasAtual, marca=null;

	function initMap(){
		var mapOptions = { center : new google.maps.LatLng(-9, -67), zoom : 16, mapTypeId : google.maps.MapTypeId.ROADMAP };
		map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
		map.addListener('click', function(e) {
			if(marca==null){
				fazPontoNoMapa(e.latLng);
			}else{
				marca.setMap(null);
				marca=null;
				fazPontoNoMapa(e.latLng);
			}
		});
	}

	infoWindow = new google.maps.InfoWindow;

	function geolocalization() {
		if (navigator.geolocation) {
			navigator.geolocation.getCurrentPosition(function(position) {
				var pos = { lat : position.coords.latitude, lng : position.coords.longitude };

				infoWindow.setPosition(pos);
				infoWindow.setContent('Location found.');
				infoWindow.open(map);
				map.setCenter(pos);
			}, function() {
				handleLocationError(true, infoWindow, map.getCenter());
			});
		} else {
			// Browser doesn't support Geolocation
			handleLocationError(false, infoWindow, map.getCenter());
		}
	}
	//
	function handleLocationError(browserHasGeolocation, infoWindow, pos) {
		infoWindow.setPosition(pos);
		infoWindow.setContent(browserHasGeolocation ? 'Erro: O serviço de golocalização falhou :(.': 'Seu navegador não suporta geolocalização..');
		infoWindow.open(map);
	}
	//cria um ponto no mapa
	function fazPonto(ponto) {
		marca = new google.maps.Marker({ position : ponto, map : map });
		mostraCordenadas(ponto);
		cordenadasAtual = ponto;
	}
	//faz pontos no mapa apartir do click  e o centraliza no mapa
	function fazPontoNoMapa(latLng) {
				fazPonto(latLng);
				map.panTo(latLng);
	}

	addEvent(f, "submit", function( e ) { alert(f.a.value);return false; });
	addEvent(f.a, "keyup", function( e ) { f.a.value=f.a.value.toUpperCase(); });
</script>
</head>

<body>

	<div id="opcoes">

		<header id="opcoes">
			<h1>CidadON</h1>
		</header>
		<form method="post">
			<center>
			<div id="conteudo">
				<h1 id="tituloAba">Cadastro de problema</h1>
					<P id="texto">descrição:</P>
					<textarea cols="35" maxlength="210" style="resize: none" rows="6"></textarea>
				</div>
					<input id="botao" type="submit" value="cadastrar"	style="border-top: 10px; padding-top: 10px; padding-bottom: 10px; padding-left: 35px; padding-right: 35px;" />
				</center>
		</form>
		<footer id="rodape">
			<p>
				Copyright &copy; 2018 - by CidadoON<br>powered by Google maps
			</p>
		</footer>
	</div>
</body>
<body>
	<div id="map_canvas" style="left: 25%; width: 75%; height: 100%"></div>
	<script type="text/javascript">
		initMap();
		geolocalization();
	</script>
</body>
</html>
